<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2015-11-26 Thu 00:53 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>scroll events under Javascript</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Spinpx" />
<link rel="stylesheet" type="text/css" href="http://spinpx.com/org.css"/>
</head>
<body>
<div id="preamble" class="status">
<div class = "nav">
    <ul>
    <li><a class = "logo" href="/index.html">SPinPx</a><li>
	<li><a href="/posts.html"> Posts </a></li>
	<li><a href="/notes.html"> Notes </a></li>
	<li><a href="/gists.html"> Gists </a></li>
	<li><a href="/about.html"> About </a></li>
    </ul>
</div>
</div>
<div id="content">
<h1 class="title">scroll events under Javascript</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">Keyboard Event</a></li>
<li><a href="#orgheadline2">Mouse Wheel Event</a></li>
<li><a href="#orgheadline3">Mobile Touch Event</a></li>
<li><a href="#orgheadline4">Windows Scroll Bar</a></li>
</ul>
</div>
</div>
<ul class="org-ul">
<li>Recently, I write an single page site like slides. It use some keyboardï¼Œmouse wheel events.</li>
<li>And I use Jquery as my tool.</li>
<li>once you have bind the event, remain things is easy. you just margin or padding the content area 100%, or go to target anchor.</li>
</ul>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1">Keyboard Event</h2>
<div class="outline-text-2" id="text-orgheadline1">
<div class="org-src-container">

<pre class="src src-js">$<span style="color: #2f96dc;">(</span>document<span style="color: #2f96dc;">)</span>.keydown<span style="color: #2f96dc;">(</span><span style="color: #237fbf; font-weight: bold;">function</span><span style="color: #bc6ec5;">(</span><span style="color: #7590db;">e</span><span style="color: #bc6ec5;">)</span> <span style="color: #bc6ec5;">{</span>
   <span style="color: #237fbf; font-weight: bold;">var</span> <span style="color: #7590db;">tag</span> = e.target.tagName.toLowerCase<span style="color: #2d9574;">()</span>;
   <span style="color: #237fbf; font-weight: bold;">switch</span><span style="color: #2d9574;">(</span>e.which<span style="color: #2d9574;">)</span> <span style="color: #2d9574;">{</span>
     <span style="color: #237fbf; font-weight: bold;">case</span> <span style="color: #a45bad;">38</span>:
       <span style="color: #237fbf; font-weight: bold;">if</span> <span style="color: #67b11d;">(</span>tag != <span style="color: #2d9574;">'input'</span> &amp;&amp; tag != <span style="color: #2d9574;">'textarea'</span><span style="color: #67b11d;">)</span> goPrev<span style="color: #67b11d;">()</span>;
       <span style="color: #237fbf; font-weight: bold;">break</span>;
     <span style="color: #237fbf; font-weight: bold;">default</span>: <span style="color: #237fbf; font-weight: bold;">return</span>;
   <span style="color: #2d9574;">}</span>
<span style="color: #bc6ec5;">}</span><span style="color: #2f96dc;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>notice that do not bind keyboard event once you are in input area</li>
<li>Jquery also provide <code>keypress</code>, <code>keyup</code>, <code>focusout</code> these related methods.</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="orgheadline2">Mouse Wheel Event</h2>
<div class="outline-text-2" id="text-orgheadline2">
<ul class="org-ul">
<li>There are three mouse wheel event in general:
<dl class="org-dl">
<dt>mousewheel</dt><dd>IE9,Chrome,Safari,Opera</dd>
<dt>DOMMousescroll</dt><dd>Firefox</dd>
<dt>onmousewheel</dt><dd>IE6/7/8</dd>
</dl></li>

<li>you can add event separately by <code>addEventListener</code>, or use Jquery's <code>bind</code> method.</li>
<li>also you should consider duplicate events. you can use time period to avoid this situation.</li>
</ul>

<div class="org-src-container">

<pre class="src src-js">$<span style="color: #2f96dc;">(</span>document<span style="color: #2f96dc;">)</span>.bind<span style="color: #2f96dc;">(</span><span style="color: #2d9574;">'mousewheel DOMMouseScroll MozMousePixelScroll'</span>, <span style="color: #237fbf; font-weight: bold;">function</span><span style="color: #bc6ec5;">(</span><span style="color: #7590db;">event</span><span style="color: #bc6ec5;">)</span> <span style="color: #bc6ec5;">{</span>
  event.preventDefault<span style="color: #2d9574;">()</span>;
  <span style="color: #237fbf; font-weight: bold;">var</span> <span style="color: #7590db;">delta</span> = event.originalEvent.wheelDelta || -event.originalEvent.detail;
  <span style="color: #237fbf; font-weight: bold;">if</span> <span style="color: #2d9574;">(</span>delta &lt; <span style="color: #a45bad;">0</span><span style="color: #2d9574;">)</span> <span style="color: #2d9574;">{</span> 
    <span style="color: #2aa1ae; background-color: #292e34;">//</span><span style="color: #2aa1ae; background-color: #292e34;">down</span>
  <span style="color: #2d9574;">}</span> <span style="color: #237fbf; font-weight: bold;">else</span> <span style="color: #2d9574;">{</span>
    <span style="color: #2aa1ae; background-color: #292e34;">//</span><span style="color: #2aa1ae; background-color: #292e34;">up</span>
  <span style="color: #2d9574;">}</span>
<span style="color: #bc6ec5;">}</span><span style="color: #2f96dc;">)</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline3" class="outline-2">
<h2 id="orgheadline3">Mobile Touch Event</h2>
</div>

<div id="outline-container-orgheadline4" class="outline-2">
<h2 id="orgheadline4">Windows Scroll Bar</h2>
<div class="outline-text-2" id="text-orgheadline4">
<ul class="org-ul">
<li>this method can be use dependent rather than above three method which usually use together to deal with different part behavior.</li>
<li>If you are not a height 100% page. Key down/up, Mouse wheel, touch Down/up all can be convert to scroll the window.</li>
<li>I use Jquery's <code>scrollTop</code> method to realize the effect.Addtionally, Jquery provide <code>scroll</code>, <code>scrollLeft</code>.
<dl class="org-dl">
<dt>obj.scrollTop()</dt><dd>just return the vertical position of the scroll bar</dd>
<dt>obj.scrollLeft()</dt><dd>return the horizontal position of the scroll bar</dd>
<dt>obj.scroll(func)</dt><dd>the same as  obj.bind('scroll'), trigger when you scroll</dd>
</dl></li>
</ul>
<div class="org-src-container">

<pre class="src src-js"><span style="color: #237fbf; font-weight: bold;">var</span> <span style="color: #7590db;">scrollNext</span> = <span style="color: #237fbf; font-weight: bold;">function</span><span style="color: #2f96dc;">()</span> <span style="color: #2f96dc;">{</span>
  <span style="color: #237fbf; font-weight: bold;">var</span> <span style="color: #7590db;">oldPos</span> = <span style="color: #a45bad;">0</span>;
  <span style="color: #237fbf; font-weight: bold;">var</span> <span style="color: #7590db;">pos</span> = $<span style="color: #bc6ec5;">(</span>window<span style="color: #bc6ec5;">)</span>.scrollTop<span style="color: #bc6ec5;">()</span>;
  <span style="color: #237fbf; font-weight: bold;">if</span> <span style="color: #bc6ec5;">(</span>pos &gt;  oldPos<span style="color: #bc6ec5;">)</span> <span style="color: #bc6ec5;">{</span>
      <span style="color: #2aa1ae; background-color: #292e34;">//</span><span style="color: #2aa1ae; background-color: #292e34;">next</span>
  <span style="color: #bc6ec5;">}</span> 
  <span style="color: #237fbf; font-weight: bold;">if</span> <span style="color: #bc6ec5;">(</span>pos &gt;  oldPos<span style="color: #bc6ec5;">)</span> <span style="color: #bc6ec5;">{</span>
      <span style="color: #2aa1ae; background-color: #292e34;">//</span><span style="color: #2aa1ae; background-color: #292e34;">prev</span>
  <span style="color: #bc6ec5;">}</span>
  oldPos = pos;
<span style="color: #2f96dc;">}</span>

$<span style="color: #2f96dc;">(</span>window<span style="color: #2f96dc;">)</span>.scroll<span style="color: #2f96dc;">(</span>scrollNext<span style="color: #2f96dc;">)</span>;
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p id="update">Last Updated : 2015-11-26 Thu 00:53 , Created by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.3.2)</p>
</div>
</body>
</html>

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2015-11-26 Thu 00:53 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title></title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Spinpx" />
<link rel="stylesheet" type="text/css" href="http://spinpx.com/org.css"/>
</head>
<body>
<div id="preamble" class="status">
<div class = "nav">
    <ul>
    <li><a class = "logo" href="/index.html">SPinPx</a><li>
	<li><a href="/posts.html"> Posts </a></li>
	<li><a href="/notes.html"> Notes </a></li>
	<li><a href="/gists.html"> Gists </a></li>
	<li><a href="/about.html"> About </a></li>
    </ul>
</div>
</div>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline3">Law and rules</a>
<ul>
<li><a href="#orgheadline1">In china</a></li>
<li><a href="#orgheadline2">DJI</a></li>
</ul>
</li>
<li><a href="#orgheadline16">Discussion on 2015.10.1</a>
<ul>
<li><a href="#orgheadline6">防御的情况</a>
<ul>
<li><a href="#orgheadline4">主控可以更改来防御的</a></li>
<li><a href="#orgheadline5">主控无法防御的</a></li>
</ul>
</li>
<li><a href="#orgheadline15">过滤系统</a>
<ul>
<li><a href="#orgheadline10">失控的定义</a></li>
<li><a href="#orgheadline11">特征的定义</a></li>
<li><a href="#orgheadline12">检测会出错的 case</a></li>
<li><a href="#orgheadline14">简单的防御模型</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline25">Onbroad SDK</a>
<ul>
<li><a href="#orgheadline17">Onboard SDK OPEN Protocol</a>
<ul>
<li><a href="#orgheadline20">confusion</a></li>
</ul>
</li>
<li><a href="#orgheadline21">Appendix</a>
<ul>
<li><a href="#orgheadline22">Coordinate Frames</a></li>
<li><a href="#orgheadline23">Control mode byte</a></li>
<li><a href="#orgheadline24">Flight status</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline3" class="outline-2">
<h2 id="orgheadline3">Law and rules</h2>
<div class="outline-text-2" id="text-orgheadline3">
</div><div id="outline-container-orgheadline1" class="outline-3">
<h3 id="orgheadline1">In china</h3>
</div>
<div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2">DJI</h3>
</div>
</div>
<div id="outline-container-orgheadline16" class="outline-2">
<h2 id="orgheadline16">Discussion on 2015.10.1</h2>
<div class="outline-text-2" id="text-orgheadline16">
</div><div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6">防御的情况</h3>
<div class="outline-text-3" id="text-orgheadline6">
</div><div id="outline-container-orgheadline4" class="outline-4">
<h4 id="orgheadline4">主控可以更改来防御的</h4>
<div class="outline-text-4" id="text-orgheadline4">
<ul class="org-ul">
<li>无人机厂商的疏忽，没有限制的地方。</li>
<li>可以写死在主控中</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline5" class="outline-4">
<h4 id="orgheadline5">主控无法防御的</h4>
<div class="outline-text-4" id="text-orgheadline5">
<ul class="org-ul">
<li>灵活性高</li>
<li>需要用户通过配置文件自定义</li>
<li>如在什么时候什么地方允许做什么事情</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-3">
<h3 id="orgheadline15">过滤系统</h3>
<div class="outline-text-3" id="text-orgheadline15">
</div><div id="outline-container-orgheadline10" class="outline-4">
<h4 id="orgheadline10">失控的定义</h4>
<div class="outline-text-4" id="text-orgheadline10">
</div><ul class="org-ul"><li><a id="orgheadline7"></a>完全失控<br  /><div class="outline-text-5" id="text-orgheadline7">
<ul class="org-ul">
<li>无人机完全不接受用户或程序发送的指令</li>
</ul>
</div></li>
<li><a id="orgheadline8"></a>部分失控<br  /><div class="outline-text-5" id="text-orgheadline8">
<ul class="org-ul">
<li>病态指令：无人机执行的实际效果与指令预期不符或相反</li>
<li>无人机不接受部分指令</li>
</ul>
</div></li>
<li><a id="orgheadline9"></a>危险状态<br  /><div class="outline-text-5" id="text-orgheadline9">
<ul class="org-ul">
<li>无人机坠毁</li>
<li>外界因素？内部因素？</li>
<li>危险状态与完全失控、部分失控模糊不清</li>
</ul>
</div></li></ul>
</div>
<div id="outline-container-orgheadline11" class="outline-4">
<h4 id="orgheadline11">特征的定义</h4>
<div class="outline-text-4" id="text-orgheadline11">
<ul class="org-ul">
<li>特征为当前状态与下一步指令的组合</li>
<li>当前状态包括:无人机飞行的速度、加速度、角速度等等。</li>
<li>下一步指令为我们的程序给无人机发送的指令，我们需要的是这个指令的语义。</li>
<li>需要减少当前状态的纬度</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline12" class="outline-4">
<h4 id="orgheadline12">检测会出错的 case</h4>
<div class="outline-text-4" id="text-orgheadline12">
<ul class="org-ul">
<li>模拟器/Onboard条件下是否能返回给我们当前状态的信息？</li>
<li>如何通过信息判断为失控？</li>
<li>如何遍历状态？</li>

<li>这是为了检测致命case, fixed</li>
</ul>
</div>

<ul class="org-ul"><li><a id="orgheadline13"></a>利用这些 case 来过滤<br  /></li></ul>
</div>

<div id="outline-container-orgheadline14" class="outline-4">
<h4 id="orgheadline14">简单的防御模型</h4>
<div class="outline-text-4" id="text-orgheadline14">
<ul class="org-ul">
<li>期望运行方向与实际方向不符合</li>
<li>运行距离、方向超过偏差范围</li>
<li>&#x2026;</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline25" class="outline-2">
<h2 id="orgheadline25">Onbroad SDK</h2>
<div class="outline-text-2" id="text-orgheadline25">
</div><div id="outline-container-orgheadline17" class="outline-3">
<h3 id="orgheadline17">Onboard SDK OPEN Protocol</h3>
<div class="outline-text-3" id="text-orgheadline17">
<ul class="org-ul">
<li><a href="https://github.com/dji-sdk/Onboard-SDK/blob/master/Onboard_API_Doc/en/OPENProtocol.md">link</a></li>
</ul>
</div>

<div id="outline-container-orgheadline20" class="outline-4">
<h4 id="orgheadline20">confusion</h4>
<div class="outline-text-4" id="text-orgheadline20">
</div><ul class="org-ul"><li><a id="orgheadline18"></a>lost of flight control<br  /><div class="outline-text-5" id="text-orgheadline18">
<blockquote>
<p>
0x01  Lost of Flight Control 
</p>
</blockquote>
<ul class="org-ul">
<li>Onboard Device has the lowerest control priority. Its control authorization can be taken over by remote controller and Mobile Device. Once the flight control is lost from the Onboard Device, a push data will be sent by the N1 Autopilot.</li>
</ul>
</div></li>

<li><a id="orgheadline19"></a>control cmd is unreliable<br  /><div class="outline-text-5" id="text-orgheadline19">
<blockquote>
<p>
CMD ID 0x03 Movement Control
CMD ID 0x1A Gimbal Control 
</p>
</blockquote>
<p>
they do not has a ACK!!
</p>
</div></li></ul>
</div>
</div>


<div id="outline-container-orgheadline21" class="outline-3">
<h3 id="orgheadline21">Appendix</h3>
<div class="outline-text-3" id="text-orgheadline21">
<ul class="org-ul">
<li><a href="https://github.com/dji-sdk/Onboard-SDK/blob/master/Onboard_API_Doc/en/Appendix.md">link</a></li>
</ul>
</div>

<div id="outline-container-orgheadline22" class="outline-4">
<h4 id="orgheadline22">Coordinate Frames</h4>
<div class="outline-text-4" id="text-orgheadline22">
<ul class="org-ul">
<li>Body Frame</li>

<li>Ground Frame</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline23" class="outline-4">
<h4 id="orgheadline23">Control mode byte</h4>
<div class="outline-text-4" id="text-orgheadline23">
<ul class="org-ul">
<li>bit 7:6</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">0b00</td>
<td class="org-left">HORI<sub>ATTI</sub><sub>TILT</sub><sub>ANG</sub></td>
<td class="org-left">-30 degree ~ 30 degree</td>
</tr>

<tr>
<td class="org-left">0b01</td>
<td class="org-left">HORI<sub>VEL</sub></td>
<td class="org-left">-10 m/s ~ 10 m/s</td>
</tr>

<tr>
<td class="org-left">0b10</td>
<td class="org-left">HORI<sub>POS</sub></td>
<td class="org-left">offset in meters (no limit)</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>bit 5:4</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">0b00</td>
<td class="org-left">VERT<sub>VEL</sub></td>
<td class="org-left">-4 m/s ~ 4 m/s</td>
</tr>

<tr>
<td class="org-left">0b01</td>
<td class="org-left">VERT<sub>POS</sub></td>
<td class="org-left">0m to height limit</td>
</tr>

<tr>
<td class="org-left">0b10</td>
<td class="org-left">VERT<sub>THRUST</sub></td>
<td class="org-left">10 ~ 100 (use with precaution)</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>bit 3</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">0b0</td>
<td class="org-left">YAW<sub>ANG</sub></td>
<td class="org-left">180 degree ~ 180 degree</td>
</tr>

<tr>
<td class="org-left">0b1</td>
<td class="org-left">YAW<sub>RATE</sub></td>
<td class="org-left">-100 degree/s ~ 100 degree/s</td>
</tr>
</tbody>
</table>
<ul class="org-ul">
<li>YAW<sub>ANG</sub> only use in ground body</li>

<li>bit 2:1</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">0b00</td>
<td class="org-left">horizontal frame is ground frame</td>
</tr>

<tr>
<td class="org-left">0b01</td>
<td class="org-left">horizontal frame is body frame</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>bit 0</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">0b0</td>
<td class="org-left">yaw frame is ground frame</td>
</tr>

<tr>
<td class="org-left">0b1</td>
<td class="org-left">yaw frame is body frame</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgheadline24" class="outline-4">
<h4 id="orgheadline24">Flight status</h4>
<div class="outline-text-4" id="text-orgheadline24">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-right">Flight status val</td>
<td class="org-left">status name</td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-left">standby</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-left">take<sub>off</sub></td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-left">in<sub>air</sub></td>
</tr>

<tr>
<td class="org-right">4</td>
<td class="org-left">landing</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left">finish<sub>landing</sub></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p id="update">Last Updated : 2015-11-26 Thu 00:53 , Created by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.3.2)</p>
</div>
</body>
</html>
